<!DOCTYPE html>
<html lang="pt-BR">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Kubernetes: Imperativo vs Declarativo - Marcelo Cavalcante Rocha</title><meta name="Description" content="Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina."><meta property="og:url" content="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/">
  <meta property="og:site_name" content="Marcelo Cavalcante Rocha">
  <meta property="og:title" content="Kubernetes: Imperativo vs Declarativo">
  <meta property="og:description" content="Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina.">
  <meta property="og:locale" content="pt_BR">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-12-24T10:53:55-05:00">
    <meta property="article:modified_time" content="2020-12-24T10:53:55-05:00">
    <meta property="article:tag" content="Devops">
    <meta property="article:tag" content="Containers">
    <meta property="article:tag" content="Kubernetes">
    <meta property="og:image" content="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg">
  <meta name="twitter:title" content="Kubernetes: Imperativo vs Declarativo">
  <meta name="twitter:description" content="Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina.">
<meta name="application-name" content="Marcelo Cavalcante">
<meta name="apple-mobile-web-app-title" content="Marcelo Cavalcante">
<meta name="referrer" content="no-referrer" /><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" /><link rel="prev" href="//blog.marcelocavalcante.net:1313/posts/criando-uma-pipeline-para-terraform/" /><link rel="next" href="//blog.marcelocavalcante.net:1313/posts/criando-um-cluster-kubernetes-local/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Kubernetes: Imperativo vs Declarativo",
        "inLanguage": "pt-BR",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/\/blog.marcelocavalcante.net:1313\/posts\/kubernetes-imperativo-vs-declarativo\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "\/\/blog.marcelocavalcante.net:1313\/posts\/kubernetes-imperativo-vs-declarativo\/featured-image.jpg",
                            "width":  990 ,
                            "height":  495 
                        }],"genre": "posts","keywords": "Devops, Containers, Kubernetes","wordcount":  1515 ,
        "url": "\/\/blog.marcelocavalcante.net:1313\/posts\/kubernetes-imperativo-vs-declarativo\/","datePublished": "2020-12-24T10:53:55-05:00","dateModified": "2020-12-24T10:53:55-05:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Marcelo Cavalcante"
            },"description": "Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina."
    }
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
    </head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script>
          const query = window.matchMedia('(prefers-color-scheme: dark)');
          function applyTheme() {
            let theme = window.localStorage?.getItem('theme') || 'auto';
            let isDark = theme === 'dark' || (theme === 'auto' && query.matches);
            document.body.setAttribute('theme', isDark? 'dark' : 'light');
            document.body.setAttribute('cfg-theme', theme);
          }

          applyTheme();
          query.addEventListener('change', applyTheme);
        </script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Marcelo Cavalcante Rocha"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="https://marcelocavalcante.net/ftp/logonew.png"
        data-srcset="https://marcelocavalcante.net/ftp/logonew.png, https://marcelocavalcante.net/ftp/logonew.png 1.5x, https://marcelocavalcante.net/ftp/logonew.png 2x"
        data-sizes="auto"
        alt="https://marcelocavalcante.net/ftp/logonew.png"
        title="https://marcelocavalcante.net/ftp/logonew.png" /></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/" title="Return to home page"><i class='fas fa-home'></i> Home </a><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categorias </a><a class="menu-item" href="/sobre/"> Quem Sou </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Pesquisar títulos ou conteúdos ..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Pesquisa">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Limpar">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Trocar tema">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Marcelo Cavalcante Rocha"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="https://marcelocavalcante.net/ftp/logonew.png"
        data-srcset="https://marcelocavalcante.net/ftp/logonew.png, https://marcelocavalcante.net/ftp/logonew.png 1.5x, https://marcelocavalcante.net/ftp/logonew.png 2x"
        data-sizes="auto"
        alt="https://marcelocavalcante.net/ftp/logonew.png"
        title="https://marcelocavalcante.net/ftp/logonew.png" /></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Pesquisar títulos ou conteúdos ..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Pesquisa">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Limpar">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancelar
                    </a>
                </div><a class="menu-item" href="/" title="Return to home page"><i class='fas fa-home'></i>Home</a><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categorias</a><a class="menu-item" href="/sobre/" title="">Quem Sou</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Trocar tema">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Conteúdos</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Kubernetes: Imperativo vs Declarativo</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://blog.marcelocavalcante.net" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Marcelo Cavalcante</a></span>&nbsp;<span class="post-category">incluido em <a href="/categories/tutoriais/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Tutoriais</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2020-12-24">2020-12-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1515 palavras&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutos&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg"
        data-srcset="/posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg, /posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg 1.5x, /posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg 2x"
        data-sizes="auto"
        alt="/posts/kubernetes-imperativo-vs-declarativo/featured-image.jpg"
        title="Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina." /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Conteúdos</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#o-que-é-o-que">O que é o que</a></li>
    <li><a href="#kubernetes-de-forma-declarativa">Kubernetes de forma Declarativa</a></li>
    <li><a href="#kubernetes-de-forma-imperativa">Kubernetes de forma Imperativa</a></li>
    <li><a href="#imperativo-vs-declarativo">Imperativo vs Declarativo</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina.</p>
<h2 id="o-que-é-o-que">O que é o que</h2>
<p><strong>U</strong>ma abordagem muito comum é a de que a capacidade de reproduzirmos coisas de forma simples e rápida é fundamental no sentido de agilidade e estabilidade. Se a ideia é termos uma infraestrutura cada vez mais descartável, a utilização de scripts ou códigos sempre que possível, preferivelmente armazenados em algum local seguro e gerenciável, como por exemplo um repositório no github, bitbucket, gitlab ou afins, é a forma correta de fazer as coisas.</p>
<p><strong>U</strong>m ótimo exemplo disto é a criação de recursos de infraestrutura com o Terraform, utilizando-se o princípio de Infraestrutura como Código. Ao codificarmos toda a nossa infraestrutura, torna-se fácil a restauração da mesma em casos de incidentes, indisponibilidade ou até mesmo escalonamento quando necessário. Uma vez que tenhamos tudo em código e devidamente armazenado em um repositório, fica fácil também o repasse de informações e continuidade de trabalho por outros membros da equipe em caso de você tirar férias ou deixar a empresa. Neste tipo de cenário costuma-se dizer que o código é a própria documentação da infraestrutura, sempre fiel e atualizada automagicamente.</p>
<p><strong>C</strong>om o Kubernetes não seria diferente, certo?!</p>
<p><strong>C</strong>aso não tenha um entendimento básico sobre o que é e como funciona o Kubernetes, sugiro a leitura deste outro post <a href="/posts/conhecendo-o-kubernetes-clusters-de/" rel="">Conhecendo O Kubernetes</a> antes de dar continuidade neste.</p>
<p><strong>O</strong> Kubernetes faz utilização da linguagem yaml para a criação e gerenciamento de seus recursos em formato de código. Desta forma, um simples exemplo para a criação de um pod rodando um servidor web nginx poderia ser um único arquivo chamado nginx-pod.yaml, da seguinte forma:</p>
<div class="code-block code-line-numbers" style="counter-reset: code-block 0">
    <div class="code-header language-yaml">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">http</span></span></span></code></pre></div></div>
<p><strong>E</strong>ste é um típico exemplo de manifesto ou arquivo de configuração para recursos do Kubernetes. Neste caso, temos toda a definição do pod nginx em um arquivo yaml. Isto é o que chamamos de forma <strong>Declarativa</strong>, onde declaramos tudo o que esperamos para nosso pod e, ao aplicarmos este código, o Kubernetes apenas irá ler nossas definições e criar exatamente como apresentado ou <em>declarado</em>.</p>
<p><strong>A</strong> outra forma de se criar/gerenciar recursos no Kubernetes seria a <strong>Imperativa</strong>, na qual ao invés de criarmos um arquivo declarando o que queremos, simplesmente damos uma ordem (<em>imperativa</em>) ao Kubernetes, informando o que ele deve fazer. Algo como: <em>Kubernetes, crie um pod rodando uma imagem nginx com a porta 80 disponível.</em></p>
<h2 id="kubernetes-de-forma-declarativa">Kubernetes de forma Declarativa</h2>
<p><strong>C</strong>omo apresentado mais acima, a forma declarativa nada mais é do que uma forma instruída com declarações ou passos que devem ser seguidos, através de um arquivo yaml, no caso do Kubernetes.</p>
<p><strong>S</strong>e pegarmos um cluster Kubernetes limpo, podemos ver que nenhum pod está rodando utilizando o comando <em>kubectl get pods</em>:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl get pods
</span></span><span class="line"><span class="cl">No resources found in default namespace.</span></span></code></pre></div></div>
<p><strong>E</strong>m seguida, criaremos um arquivo chamado <em>nginx-pod.yaml</em> com o seguinte conteúdo:</p>
<div class="code-block code-line-numbers" style="counter-reset: code-block 0">
    <div class="code-header language-yaml">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">http</span></span></span></code></pre></div></div>
<p><strong>A</strong>gora podemos de fato criar o nosso pod através da <em>declaração</em> que incluímos no arquivo <em>nginx-pod.yaml</em>. Para isto utilizaremos o comando <em>kubectl apply -f nginx-pod.yaml</em>:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl apply -f nginx-pod.yaml
</span></span><span class="line"><span class="cl">pod/nginx created</span></span></code></pre></div></div>
<p><strong>A</strong>parentemente tudo ocorreu bem e podemos agora confirmar que nosso pod foi criado através do comando <em>kubectl get pods</em> novamente:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl get pods
</span></span><span class="line"><span class="cl">NAME    READY   STATUS    RESTARTS   AGE
</span></span><span class="line"><span class="cl">nginx   1/1     Running   <span class="m">0</span>          44s</span></span></code></pre></div></div>
<p><strong>D</strong>esta mesma forma podemos interagir e criar todos os recursos necessários para nosso cluster, sejam deployments, replicasets, volumes, etc. Por hora, vamos deletar o pod criado anteriormente utilizando o comando <em>kubectl delete pod nginx</em> e em seguida vamos confirmar o sucesso do delete com <em>kubectl get pods</em>:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl delete pod nginx
</span></span><span class="line"><span class="cl">pod <span class="s2">&#34;nginx&#34;</span> deleted</span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl get pods
</span></span><span class="line"><span class="cl">No resources found in default namespace.</span></span></code></pre></div></div>
<h2 id="kubernetes-de-forma-imperativa">Kubernetes de forma Imperativa</h2>
<p><strong>D</strong>a mesma forma que fizemos de forma declarativa, as APIs do Kubernetes nos permitem uma abordagem mais direta e imperativa sem a necessidade de arquivos de configuração ou manifestos em formato yaml. Neste tipo de abordagem tudo o que precisamos fazer é dizer o que queremos que seja feito, e o Kubernetes assumirá a responsabilidade de definir o que deverá ser feito para atingir o resultado esperado.</p>
<p><strong>S</strong>eguindo o mesmo exemplo de um simples pod rodando nginx, poderíamos simplesmente utilizar o comando <em>kubectl run &ndash;image=nginx nginx</em> e em seguida confirmarmos a criação do pod com <em>kubectl get pods</em>:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl run --image<span class="o">=</span>nginx nginx
</span></span><span class="line"><span class="cl">pod/nginx created</span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl get pods
</span></span><span class="line"><span class="cl">NAME    READY   STATUS    RESTARTS   AGE
</span></span><span class="line"><span class="cl">nginx   1/1     Running   <span class="m">0</span>          15s</span></span></code></pre></div></div>
<p><strong>O</strong> resultado foi exatamente o mesmo, porém não utilizamos nenhum arquivo yaml para tal, o que faz com que esta abordagem acabe sendo, em muitos casos, mais simples e rápida, certo?!</p>
<p><strong>A</strong>lém da criação do recurso em si, a abordagem imperativa lhe permite também criar uma forma híbrida de se trabalhar, onde você utilizará a abordagem imperativa como uma forma de facilitar a sua vida com a abordagem declarativa. Sim, é isso mesmo que você acabou de ler, eu não estou louco.</p>
<p><strong>A</strong> maior desvantagem da abordagem declarativa, em meu ver, é justamente a necessidade de digitar todas aquelas linhas de código yaml. Nem sempre conseguimos memorizar cada linha e sempre temos de ir à documentação para definir o que precisamos em nosso arquivo. Com a abordagem imperativa, temos a capacidade de criar arquivos yaml declarativos de forma rápida e automatizada. Assim, ao invés de precisarmos memorizar todas as linhas, precisamos apenas alterar as linhas que nos interessam. É basicamente uma forma simples de gerar templates rapidamente.</p>
<p>Por exemplo, no caso de nosso pod nginx, vamos iniciar deletando o pod criado com <em>kubectl delete pod nginx</em> novamente:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl delete pod nginx
</span></span><span class="line"><span class="cl">pod <span class="s2">&#34;nginx&#34;</span> deleted</span></span></code></pre></div></div>
<p><strong>A</strong>gora vamos criar um novo arquivo yaml, chamado <em>nginx-pod2.yaml</em>. Porém, desta vez, não criaremos o código manualmente. Utilizaremos a forma imperativa para gerar este código, através do comando <em>kubectl run nginx &ndash;image=nginx &ndash;dry-run=client -o yaml</em>:</p>
<div class="code-block code-line-numbers" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl run nginx --image<span class="o">=</span>nginx --dry-run<span class="o">=</span>client -o yaml
</span></span><span class="line"><span class="cl">apiVersion: v1
</span></span><span class="line"><span class="cl">kind: Pod
</span></span><span class="line"><span class="cl">metadata:
</span></span><span class="line"><span class="cl">  creationTimestamp: null
</span></span><span class="line"><span class="cl">  labels:
</span></span><span class="line"><span class="cl">    run: nginx
</span></span><span class="line"><span class="cl">  name: nginx
</span></span><span class="line"><span class="cl">spec:
</span></span><span class="line"><span class="cl">  containers:
</span></span><span class="line"><span class="cl">  - image: nginx
</span></span><span class="line"><span class="cl">    name: nginx
</span></span><span class="line"><span class="cl">    resources: <span class="o">{}</span>
</span></span><span class="line"><span class="cl">  dnsPolicy: ClusterFirst
</span></span><span class="line"><span class="cl">  restartPolicy: Always
</span></span><span class="line"><span class="cl">status: <span class="o">{}</span></span></span></code></pre></div></div>
<p><strong>P</strong>odemos ver que o comando nos jogou toda a declaração para um pod nginx, porém não era isso que queríamos, certo?! Queríamos que um novo arquivo fosse criado. Mas é importante notar que o comando nos apresentou toda a declaração necessária, o que pode nos servir de referência apenas para validação ou em caso de dúvida sobre algo. Agoras podemos incluir <em>&gt; nginx-pod2.yaml</em> ao final do nosso comando anterior e o mesmo irá de fato jogar este conteúdo para um novo arquivo, assim como desejamos:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl run nginx --image<span class="o">=</span>nginx --dry-run<span class="o">=</span>client -o yaml &gt; nginx-pod2.yaml</span></span></code></pre></div></div>
<p><strong>A</strong>gora, com nosso novo arquivo criado, podemos criar nosso pod exatamente como fizemos anteriormente com o método declarativo, porém apontando para o novo arquivo <em>nginx-pod2.yaml</em>:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl apply -f nginx-pod2.yaml
</span></span><span class="line"><span class="cl">pod/nginx created</span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜ kubectl get pods
</span></span><span class="line"><span class="cl">NAME    READY   STATUS    RESTARTS   AGE
</span></span><span class="line"><span class="cl">nginx   1/1     Running   <span class="m">0</span>          6s</span></span></code></pre></div></div>
<p><strong>N</strong>osso pod foi novamente criado, exatamente da mesma forma. Sim, o arquivo yaml que foi criado automaticamente possui algumas linhas a mais, pois foi criado utilizando o template padrão do kubernetes, mas nenhuma delas afetará o funcionamento do seu pod. São linhas não obrigatórios, por isso conseguíamos criar o pod mesmo sem elas.</p>
<p><strong>D</strong>a mesma forma podemos fazer muitas outras coisas de forma imperativa:</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># (Para criar um deployment)</span>
</span></span><span class="line"><span class="cl">kubectl create deployment --image<span class="o">=</span>nginx nginx</span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># (para criar um service para expôr um deployment)</span>
</span></span><span class="line"><span class="cl">kubectl expose deployment nginx --port <span class="m">80</span></span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># (para escalonar um deployment existente)</span>
</span></span><span class="line"><span class="cl">kubectl scale deployment nginx --replicas<span class="o">=</span><span class="m">10</span></span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># (para editar um deployment já existente)</span>
</span></span><span class="line"><span class="cl">kubectl edit deployment nginx</span></span></code></pre></div></div>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-bash">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copiar para a área de transferência"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># (para setar uma nova versão de imagem a ser utilizada em um deployment existente)</span>
</span></span><span class="line"><span class="cl">kubectl <span class="nb">set</span> image deployment nginx <span class="nv">nginx</span><span class="o">=</span>nginx:2.10</span></span></code></pre></div></div>
<p>etc.. etc&hellip; etc&hellip;</p>
<h2 id="imperativo-vs-declarativo">Imperativo vs Declarativo</h2>
<p><strong>S</strong>endo assim, qual das duas é melhor? Qual devo utilizar?</p>
<p><strong>A</strong> resposta mais simplista seria que ambas são boas e que você deveria aprender e se sentir confortável com ambas as alternativas, visto que elas se complementam.</p>
<p><strong>T</strong>udo dependerá da situação e do que se deseja fazer. Como sempre costumo dizer, um código em um repositório git é sempre a melhor prática para continuidade de negócio, no entanto existem situações em que um simples comando imperativo lhe trará resultados mais rápidos como em testes simples, automação em pipelines, validação de comandos, geração de templates ou mesmo durante exames de certificação, como o da certificação CKA (Certified Kubernetes Administrator), no qual você possui uma série de questões para resolver e um tempo limitado para tal. Comandos imperativos vão economizar segundos preciosos durante o exame. (Sim, já vi muita gente falhando no exame e dizendo que não teve tempo o suficiente para todas as questões.)</p>
<p><strong>N</strong>o mais, espero que a diferença entre ambas as abordagens tenha ficado clara. Este post não possui o intuito de ensinar a fundo nenhum dos comandos citados acima, mas sim a diferença entre ambas as abordagens no Kubernetes portanto não entrei em detalhes para cada comando.</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Atualizado em 2020-12-24</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartilhe em X" data-sharer="x" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-title="Kubernetes: Imperativo vs Declarativo" data-via="Marcelo_Kalib" data-hashtags="Devops,Containers,Kubernetes"><i class="fab fa-x-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em Threads" data-sharer="threads" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-title="Kubernetes: Imperativo vs Declarativo"><i class="fab fa-threads fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em Facebook" data-sharer="facebook" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-hashtag="Devops"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em Linkedin" data-sharer="linkedin" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em Hacker News" data-sharer="hackernews" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-title="Kubernetes: Imperativo vs Declarativo"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em Line" data-sharer="line" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-title="Kubernetes: Imperativo vs Declarativo"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@15.14.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em 微博" data-sharer="weibo" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-title="Kubernetes: Imperativo vs Declarativo"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartilhe em Diaspora" data-sharer="diaspora" data-url="//blog.marcelocavalcante.net:1313/posts/kubernetes-imperativo-vs-declarativo/" data-title="Kubernetes: Imperativo vs Declarativo" data-description="Um breve compartivo entre duas formas de gerenciar seus recursos no Kuberntes: Declarativo vs Imperativo. O kubectl é mais poderoso do que você imagina."><i class="fab fa-diaspora fa-fw" aria-hidden="true"></i></a><a href="https://t.me/share/url?url=%2f%2fblog.marcelocavalcante.net%3a1313%2fposts%2fkubernetes-imperativo-vs-declarativo%2f&amp;text=Kubernetes%3a%20Imperativo%20vs%20Declarativo" target="_blank" title="Compartilhe em Telegram"><i class="fab fa-telegram fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/devops/">Devops</a>,&nbsp;<a href="/tags/containers/">Containers</a>,&nbsp;<a href="/tags/kubernetes/">Kubernetes</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Voltar</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/criando-uma-pipeline-para-terraform/" class="prev" rel="prev" title="Criando Uma Pipeline Para Terraform Com o Gitlab"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Criando Uma Pipeline Para Terraform Com o Gitlab</a>
            <a href="/posts/criando-um-cluster-kubernetes-local/" class="next" rel="next" title="Criando Um Cluster Kubernetes Local Com O Kind">Criando Um Cluster Kubernetes Local Com O Kind<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Possibilitado por <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2008 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://blog.marcelocavalcante.net" target="_blank">Marcelo Cavalcante</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Voltar ao topo">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a>
        </div>

        <div id="fixed-buttons-hidden"><a href="#" id="view-comments" class="fixed-button" title="Ver comentários">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script src="https://marcelocavalcante.disqus.com/embed.js" defer></script><script src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.pt.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js"></script><script>window.config={"comment":{},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"pt","maxResultLength":10,"noResultsFound":"Nenhum resultado encontrado","snippetLength":30,"type":"lunr"}};</script><script src="/js/theme.min.js"></script></body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var searchIndex;

        fetch('/lunr.json')
            .then(response => response.json())
            .then(data => {
                searchIndex = lunr(function () {
                    this.field('title');
                    this.field('content');
                    this.field('tags');
                    this.ref('uri');

                    data.forEach(doc => {
                        this.add(doc);
                    });
                });
            });

        function performSearch(query) {
            if (searchIndex) {
                var results = searchIndex.search(query);
                displayResults(results);
            }
        }

        function displayResults(results) {
            var resultsContainer = document.getElementById('search-results');
            resultsContainer.innerHTML = '';
            results.forEach(result => {
                var item = document.createElement('div');
                item.innerHTML = `<a href="${result.ref}">${result.ref}</a>`;
                resultsContainer.appendChild(item);
            });
        }

        var searchInputDesktop = document.getElementById('search-input-desktop');
        if (searchInputDesktop) {
            searchInputDesktop.addEventListener('input', function() {
                performSearch(searchInputDesktop.value);
            });
        }

        var searchInputMobile = document.getElementById('search-input-mobile');
        if (searchInputMobile) {
            searchInputMobile.addEventListener('input', function() {
                performSearch(searchInputMobile.value);
            });
        }
    });
</script>
